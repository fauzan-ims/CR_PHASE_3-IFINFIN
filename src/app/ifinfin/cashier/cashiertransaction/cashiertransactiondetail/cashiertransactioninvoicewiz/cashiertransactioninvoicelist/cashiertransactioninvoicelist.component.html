<router-outlet></router-outlet>


<div id="hideMainPanelWiz" class="main-content margin-wizard-content">
    <!-- spinner region -->
    <div class="panel-container-spinner" *ngIf="showSpinner">
        <app-spinner class="spinner-container"></app-spinner>
    </div>
    <!-- end spinner region -->
    <div class="row">
        <div class="col-md-12">
            <!--#region button add-->
            <div class="toolbar" [hidden]="isButton">
                <button id="reloadWiz" class="btn btn-info btn-round" (click)="this.ngOnInit()" hidden
                    data-role="R00003180007319C">
                    Reload
                </button>
                <button class="btn btn-info btn-round" type="button" (click)="btnlookupInvoice()"
                    data-target="#lookupModalInvoice" data-role="R00003180008319C" data-toggle="modal" href="#">
                    Add </button>
                <button class="btn btn-info btn-round" (click)="btnSaveList()" data-role="R00003180009319C">
                    Save
                </button>
                <button type="button" class="btn btn-info btn-round" (click)="btnAllocate()"
                    style="width: fit-content;margin: auto;" data-role="R00003180010319C">Auto
                    Allocate</button>
                <button class="btn btn-danger btn-round" (click)="btnDeleteAll()" data-role="R00003180002319D">
                    Delete
                </button>
                <button class="btn btn-info btn-round" (click)="btnPrint(model.agreement_no,model.rpt_code,model.report_name)" data-role="R00003180001319P">
                    Print
                </button>
            </div>
            <!--#endregion button add-->

            <!--#region agreement_no-->
            <div class="col-md-4" hidden>
                <div class="form-group">
                    <label>Agreement No</label>
                    <input type="text" class="form-control" [ngModel]="model.agreement_no" name="p_agreement_no">
                </div>
            </div>
            <!--#endregion agreement_no-->

            <!--#region cashier_orig_amount-->
            <div class="col-md-4" hidden>
                <div class="form-group">
                    <label>Orig Amount</label>
                    <input type="text" class="form-control" [ngModel]="model.cashier_orig_amount"
                        name="p_cashier_orig_amount">
                </div>
            </div>
            <!--#endregion cashier_orig_amount-->

            <!--#region list view-->
            <table id="datatableCashierTransactionInvoiceList" datatable [dtOptions]="dtOptions"
                class="table table-striped table-bordered row-border hover" cellspacing="0" width="100%">
                <thead>
                    <tr>
                        <th class="disabled-sorting">No</th>
                        <th class="disabled-sorting">
                            <div class="form-check">
                                <label class="form-check-label">
                                    <input class="form-check-input" type="checkbox" id="checkalltable"
                                        [(ngModel)]="selectedAllTable" (change)="selectAllTable();" />
                                    <span class="form-check-sign"></span>
                                </label>
                            </div>
                        </th>
                        <th>Invoice No</th>
                        <th>Invoice Date</th>
                        <th>Invoice Due Date</th>
                        <th>Invoice Net Amount</th>
                        <th>Invoice Balance Amount</th>
                        <th>Allocation Amount</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let row of listcashiertransactioninvoice; let i = index">
                        <td style="text-align: center;">{{listcashiertransactioninvoice.numberIndex+i+1}}</td>
                        <td class="disabled-sorting">
                            <div class="form-check">
                                <label class="form-check-label">
                                    <input class="form-check-input" type="checkbox" [(ngModel)]="row.selectedTable"
                                        (change)="checkIfAllTableSelected($event, row.id);">
                                    <span class="form-check-sign"></span>
                                </label>
                            </div>
                        </td>
                        <td style="width: 25%;">{{row.invoice_no}} <br> {{row.customer_name}}</td>
                        <td style="text-align: center;width: 15%;">{{row.invoice_date}} </td>
                        <td style="text-align: center;width: 15%;">{{row.invoice_due_date}} </td>
                        <td style="text-align: right;width: 15%;"> {{row.invoice_net_amount | number : '1.2-2'}} </td>
                        <td style="text-align: right;width: 15%;"> {{row.invoice_balance_amount | number : '1.2-2'}}
                        </td>
                        <td style="text-align: right;width: 15%;" class="if-no-edit-btn">
                            <div class="form-group">
                                <input type="hidden" value="{{row.id}}" name="p_id">
                                <input id="allocation_amount{{i}}" (blur)="onBlur($event,i,'amount')"
                                    (focus)="onFocus($event,i,'amount')" class="text-right" type="text"
                                    value="{{row.allocation_amount | number : '1.2-2'}}" amount="allocation_amount"
                                    name="p_allocation_amount">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <!--#endregion list view-->
        </div>
        <div class="card-footer ">
        </div>
    </div>
</div>

<!--#region lookup cashier invoice-->
<div class="modal bd-example-modal-lg" tabindex="-1" aria-hidden="true" id="lookupModalInvoice"
    style="margin-top: -65px">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body" style="overflow:hidden; padding: 10px;">
                <div class="col-md-12">
                    <!--#region button add-->
                    <button class="btn btn-info btn-round" (click)="btnSelectAllLookup()" data-role="R00003180008319C"
                        id="button">
                        Add
                    </button>
                    <!--#endregion button add--->
                    <div class="card-body col-md-12" style="width: 100%">
                        <table id="datatableLookupInvoice" class="table table-striped table-bordered hover"
                            cellspacing="0" width="100%">
                            <thead>
                                <tr>
                                    <th class="disabled-sorting">No</th>
                                    <th class="disabled-sorting">
                                        <div class="form-check">
                                            <label class="form-check-label">
                                                <input class="form-check-input" type="checkbox" id="checkallLookup"
                                                    [(ngModel)]="selectedAllLookup" (change)="selectAllLookup();" />
                                                <span class="form-check-sign"></span>
                                            </label>
                                        </div>
                                    </th>
                                    <th>Invoice No</th>
                                    <th>Invoice Date</th>
                                    <th>Invoice Due Date</th>
                                    <th>Net Amount</th>
                                    <th>Transaction Amount</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let row of lookupinvoice;let i=index ">
                                    <td style="text-align: center;">{{lookupinvoice.numberIndex+i+1}}
                                    </td>
                                    <td>
                                        <div class="form-check">
                                            <label class="form-check-label">
                                                <input class="form-check-input" type="checkbox"
                                                    [(ngModel)]="row.selectedLookup"
                                                    (change)="checkIfAllLookupSelected($event, row.asset_no, row.invoice_no, row.customer_name, row.invoice_date, row.invoice_due_date, row.transaction_amount, row.invoice_net_amount);">
                                                <span class="form-check-sign"></span>
                                            </label>
                                        </div>
                                    </td>
                                    <td style="width: 40%;">{{row.invoice_no}} <br> {{row.customer_name}}</td>
                                    <td style="text-align: center;width: 15%;">{{row.invoice_date}} </td>
                                    <td style="text-align: center;width: 15%;">{{row.invoice_due_date}} </td>
                                    <td style="text-align: right;width: 15%;"> {{row.invoice_net_amount | number :
                                        '1.2-2'}} </td>
                                    <td style="text-align: right;width: 15%;"> {{row.transaction_amount | number :
                                        '1.2-2'}}
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!--#endregion lookup cashier received request-->
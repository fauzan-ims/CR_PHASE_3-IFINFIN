<router-outlet></router-outlet>


<div id="hideMainPanelWiz" class="main-content margin-wizard-content">
    <!-- spinner region -->
    <div class="panel-container-spinner" *ngIf="showSpinner">
        <app-spinner class="spinner-container"></app-spinner>
    </div>
    <!-- end spinner region -->
    <div class="row">
        <div class="col-md-12">
            <!--#region button add-->
            <div class="toolbar" [hidden]="isButton">
                <button id="reloadWiz" class="btn btn-info btn-round" (click)="this.ngOnInit()" hidden
                    data-role="R00003180004319C">
                    Reload
                </button>
                <!-- [hidden]="is_received_request || isSuspend" -->
                <button [hidden]="isSuspend || is_received_request" class="btn btn-info btn-round" type="submit"
                    (click)="btnlookupCashiesrReceivedRequest()" data-target="#lookupModalCashiesrReceivedRequest"
                    data-role="R00003180005319C" data-toggle="modal" href="#">
                    Add </button>
                <button [hidden]="isSuspend" class="btn btn-info btn-round" (click)="btnSaveList()"
                    data-role="R00003180006319C">
                    Save
                </button>
                <button [hidden]="isSuspend" class="btn btn-danger btn-round" (click)="btnDeleteAll()"
                    data-role="R00003180000319D">
                    Delete
                </button>
            </div>
            <!--#endregion button add-->

            <!--#region list view-->
            <table id="datatableCashierTransactionAllocationList" datatable [dtOptions]="dtOptions"
                class="table table-striped table-bordered row-border hover" cellspacing="0" width="100%">
                <thead>
                    <tr>
                        <th class="disabled-sorting">No</th>
                        <th class="disabled-sorting">
                            <div class="form-check">
                                <label class="form-check-label">
                                    <input class="form-check-input" type="checkbox" id="checkalltable"
                                        [(ngModel)]="selectedAllTable" (change)="selectAllTable();" />
                                    <span class="form-check-sign"></span>
                                </label>
                            </div>
                        </th>
                        <th>Allocation</th>
                        <th>Agreement No</th>
                        <th>Invoice No/ Date/ Due Date / Installment No</th>
                        <th>Invoice Amount/ PPN/ PPH</th>
                        <th>Due Amount</th>
                        <th>Orig Amount</th>
                        <th>Base Amount</th>
                        <th>Paid</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let row of listcashiertransactionallocation; let i = index">
                        <td style="text-align: center;">{{listcashiertransactionallocation.numberIndex+i+1}}</td>
                        <td class="disabled-sorting">
                            <div class="form-check">
                                <label class="form-check-label">
                                    <input class="form-check-input" type="checkbox" [(ngModel)]="row.selectedTable"
                                        (change)="checkIfAllTableSelected($event, row.id);">
                                    <span class="form-check-sign"></span>
                                </label>
                            </div>
                        </td>
                        <td style="width: 20%;">{{row.transaction_no}} <br> {{row.transaction_name}}</td>
                        <td style="width: 15%;">
                            <div class="form-group">
                                <div class="col-md-12 buttons">
                                    <button class="btn btn-icon btn-outline-default btn-round btn-md" type="button"
                                        (click)="btnLookupAgreement(row.id)" data-target="#lookupModalAgreement"
                                        data-toggle="modal" href="#" [disabled]="row.transaction_code !== 'DPINST'">
                                        <i class="fa fa-search-plus"></i>
                                    </button> {{row.agreement_no}}
                                </div>
                            </div>
                        </td>
                        <!-- <td style="text-align: right;width: 10%;">{{row.installment_no}} </td> -->
                        <td style="text-align: left;width: 15%;">{{row.invoice_external_no}} <br> {{row.invoice_date}}
                            <br> {{row.invoice_due_date}}
                        </td>
                        <td style="text-align: right;width: 10%;">{{row.invoice_billing_amount | number : '1.2-2'}} <br>
                            {{row.invoice_ppn_amount | number : '1.2-2'}} <br> {{row.invoice_pph_amount | number :
                            '1.2-2'}}</td>
                        <td style="text-align: right;width: 10%;"> {{row.innitial_amount | number : '1.2-2'}} <br>
                            {{row.orig_currency_code}}</td>
                        <td style="text-align: right;width: 10%;"> {{row.orig_amount | number :
                            '1.2-2'}} <br> {{row.exch_rate | number : '1.6-6'}} </td>
                        <td style="text-align: right;width: 15%;">
                            <div class="form-group">
                                <input class="text-right" type="hidden" value="{{row.exch_rate}}" name="p_exch_rate">
                                <input class="text-right" type="hidden" value="{{row.innitial_amount}}"
                                    name="p_innitial_amount">
                                <input id="base_amount{{i}}" (blur)="onBlur($event,i,'amount')"
                                    (focus)="onFocus($event,i,'amount')" class="text-right" type="text"
                                    value="{{row.base_amount | number : '1.2-2'}}" amount="base_amount"
                                    name="p_base_amount"
                                    [disabled]="isButton || !is_received_request || row.is_module || isSuspend || row.is_partial">
                            </div>
                        </td>
                        <td class="disabled-sorting">
                            <div class="form-check" style="text-align: center;">
                                <label class="form-check-label">
                                    <input type="hidden" value="{{row.id}}" name="p_id">
                                    <input [disabled]="isButton || isSuspend" id="is_paid{{i}}" class="form-check-input"
                                        type="checkbox" [checked]="row.is_paid" name="p_is_paid"
                                        (click)="OnPaid($event, i)">
                                    <span class="form-check-sign"></span>
                                </label>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <!--#endregion list view-->
        </div>
        <div class="card-footer ">
        </div>
    </div>
</div>

<!--#region lookup agreement-->
<div class="modal bd-example-modal-lg" tabindex="-1" aria-hidden="true" id="lookupModalAgreement"
    style="margin-top: -65px">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body" style="overflow:hidden;">
                <div class="col-md-12">
                    <div class="card-body col-md-12">
                        <table id="datatableLookupAgreement" class="table table-striped table-bordered hover"
                            cellspacing="0" style="min-width: 100%;">
                            <thead>
                                <tr>
                                    <th class="disabled-sorting">No</th>
                                    <th style="display: none;"></th>
                                    <th>Agreement No</th>
                                    <th>Amount</th>
                                    <th class="text-center">Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let row of lookupagreement;let i=index ">
                                    <td style="text-align: center;">{{lookupagreement.numberIndex+i+1}}</td>
                                    <th style="display: none;"></th>
                                    <td style="width: 70%;">{{ row.agreement_no }}
                                    </td>
                                    <td class="text-right" style="width: 30%;">{{ row.orig_amount | number :
                                        '1.2-2' }} </td>
                                    <td class="text-center">
                                        <button class="btn btn-outline-default btn-round"
                                            (click)="btnSelectRowAgreement(row.agreement_no, row.agreement_external_no, row.client_name, row.currency_code, row.factoring_type)">Select</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!--#endregion lookup agreement-->

<!--#region lookup cashier received request-->
<div class="modal bd-example-modal-lg" tabindex="-1" aria-hidden="true" id="lookupModalCashiesrReceivedRequest"
    style="margin-top: -65px">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body" style="overflow:hidden; padding: 10px;">
                <div class="col-md-12">
                    <!--#region button add-->
                    <button class="btn btn-info btn-round" (click)="btnSelectAllLookup()" data-role="R00003180005319C"
                        id="button">
                        Add
                    </button>
                    <!--#endregion button add--->
                    <div class="card-body col-md-12" style="width: 100%">
                        <table id="datatableLookupCashiesrReceivedRequest"
                            class="table table-striped table-bordered hover" cellspacing="0" width="100%">
                            <thead>
                                <tr>
                                    <th class="disabled-sorting">No</th>
                                    <th class="disabled-sorting">
                                        <div class="form-check">
                                            <label class="form-check-label">
                                                <input class="form-check-input" type="checkbox" id="checkallLookup"
                                                    [(ngModel)]="selectedAllLookup" (change)="selectAllLookup();" />
                                                <span class="form-check-sign"></span>
                                            </label>
                                        </div>
                                    </th>
                                    <th>Request No</th>
                                    <th>Remark</th>
                                    <th>Currency</th>
                                    <th>Amount</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let row of lookupcashierreceivedrequest;let i=index ">
                                    <td style="text-align: center;">{{lookupcashierreceivedrequest.numberIndex+i+1}}
                                    </td>
                                    <td>
                                        <div class="form-check">
                                            <label class="form-check-label">
                                                <input class="form-check-input" type="checkbox"
                                                    [(ngModel)]="row.selectedLookup"
                                                    (change)="checkIfAllLookupSelected($event, row.code, row.request_amount, row.request_currency_code, row.request_remarks);">
                                                <span class="form-check-sign"></span>
                                            </label>
                                        </div>
                                    </td>
                                    <td style="width: 20%;" class="text-center">{{row.code}}</td>
                                    <td style="width: 45%;">{{row.request_remarks}}</td>
                                    <td style="width: 15%;" class="text-center">{{row.request_currency_code}}</td>
                                    <td style="width: 20%;" class="if-no-edit-btn text-right">{{row.request_amount |
                                        number : '1.2-2'}}
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!--#endregion lookup cashier received request-->